<!doctype html><html lang=de class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><link rel=canonical type=text/html href=https://test.openbikesensor.org/docs/firmware/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Firmware | OpenBikeSensor</title><meta property="og:title" content="Firmware"><meta property="og:description" content="Überholabstandsmessung für Radfahrende. Open source, open data, open science."><meta property="og:type" content="website"><meta property="og:url" content="https://test.openbikesensor.org/docs/firmware/"><meta property="og:site_name" content="OpenBikeSensor"><meta itemprop=name content="Firmware"><meta itemprop=description content="Überholabstandsmessung für Radfahrende. Open source, open data, open science."><meta name=twitter:card content="summary"><meta name=twitter:title content="Firmware"><meta name=twitter:description content="Überholabstandsmessung für Radfahrende. Open source, open data, open science."><link rel=preload href=/scss/main.min.14a54fb47ff80f3c213aeb6c5b71e159412d9339572d118841de380b5dd4f24e.css as=style><link href=/scss/main.min.14a54fb47ff80f3c213aeb6c5b71e159412d9339572d118841de380b5dd4f24e.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://test.openbikesensor.org/js/slider/ideal-image-slider.min.js></script><script src=https://test.openbikesensor.org/js/slider/iis-bullet-nav.js></script><script src=https://test.openbikesensor.org/js/slider/iis-captions.js></script><script src=https://test.openbikesensor.org/js/obs.js></script><link rel=stylesheet href=https://test.openbikesensor.org/css/slider/ideal-image-slider.css><link rel=stylesheet href=https://test.openbikesensor.org/css/slider/themes/default.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/svg+xml sizes=any href=/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileImage content="/mstile-144x144.png"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42.52 42.52"><polygon points="6.48 10.17 14.66 10.17 14.66 8.17 6.48 8.17 6.48 5.76 4.48 5.76 4.48 12.59 6.48 12.59 6.48 10.17" fill="#fff"/><path d="M18.8 14.62c1.5.0 2.61-1.4 2.61-4.42V8.62c0-3.06-1.11-4.42-2.61-4.42s-2.62 1.36-2.62 4.42V10.2c0 3.02 1.11 4.42 2.62 4.42zm-1-6c0-1.66.35-2.4 1-2.4s1 .74 1 2.4V10.2c0 1.66-.35 2.39-1 2.39s-1-.73-1-2.39z" fill="#fff"/><path d="M24 11.05h.9c1.54.0 2.5-1.17 2.5-3.42s-1-3.29-2.5-3.29h-2.5V14.47H24zm0-4.68h.61c.84.0 1.2.44 1.2 1.26.0 1-.36 1.4-1.2 1.4H24z" fill="#fff"/><polygon points="32.27 12.45 29.68 12.45 29.68 10.24 31.98 10.24 31.98 8.22 29.68 8.22 29.68 6.37 32.27 6.37 32.27 4.34 28.09 4.34 28.09 14.47 32.27 14.47 32.27 12.45" fill="#fff"/><polygon points="36.81 10.03 34.36 4.34 33.09 4.34 33.09 14.47 34.59 14.47 34.59 8.87 37.02 14.47 38.31 14.47 38.31 4.34 36.81 4.34 36.81 10.03" fill="#fff"/><polygon points="36.29 20.07 24.81 20.07 24.81 22.09 36.29 22.09 36.29 24.49 38.31 24.49 38.31 17.66 36.29 17.66 36.29 20.07" fill="#fff"/><path d="M8.52 21a2.72 2.72.0 00.76-2.11c0-1.85-.91-2.69-2.47-2.69H4.49V26.32H7c1.76.0 2.47-1.29 2.47-2.91A2.76 2.76.0 008.52 21zM6.09 18.2h.52c.88.0 1.08.36 1.08 1s-.29.89-.93.89H6.09zm.76 6.1H6.09V22.08h.64c.81.0 1.17.28 1.17 1.1S7.56 24.3 6.85 24.3z" fill="#fff"/><rect x="10.46" y="16.19" width="1.59" height="10.13" fill="#fff"/><polygon points="16.9 26.32 18.8 26.32 16.49 20.29 18.45 16.19 16.6 16.19 14.89 19.95 14.89 16.19 13.3 16.19 13.3 26.32 14.89 26.32 14.89 23.64 15.47 22.43 16.9 26.32" fill="#fff"/><polygon points="23.7 18.22 23.7 16.19 19.52 16.19 19.52 26.32 23.7 26.32 23.7 24.3 21.11 24.3 21.11 22.09 23.41 22.09 23.41 20.07 21.11 20.07 21.11 18.22 23.7 18.22" fill="#fff"/><path d="M7.18 32.11C6.35 31.74 6 31.4 6 30.8s.23-.88.76-.88.92.25 1.18.92l1.18-1.29a2.48 2.48.0 00-2.38-1.66c-1.61.0-2.33 1.25-2.33 2.93A3.15 3.15.0 006.33 34c1 .49 1.25.78 1.25 1.37a.79.79.0 01-.86.88 1.4 1.4.0 01-1.32-.91L4.21 36.66a2.7 2.7.0 002.65 1.66c1.5.0 2.31-1.19 2.31-3A2.94 2.94.0 007.18 32.11z" fill="#fff"/><polygon points="10.04 38.17 14.22 38.17 14.22 36.14 11.63 36.14 11.63 33.94 13.93 33.94 13.93 31.92 11.63 31.92 11.63 30.07 14.22 30.07 14.22 28.04 10.04 28.04 10.04 38.17" fill="#fff"/><polygon points="18.76 33.72 16.3 28.04 15.04 28.04 15.04 38.17 16.54 38.17 16.54 32.56 18.97 38.17 20.26 38.17 20.26 28.04 18.76 28.04 18.76 33.72" fill="#fff"/><path d="M24.1 32.11c-.84-.37-1.18-.71-1.18-1.31s.23-.88.76-.88.92.25 1.18.92L26 29.55a2.49 2.49.0 00-2.38-1.66c-1.62.0-2.34 1.25-2.34 2.93A3.15 3.15.0 0023.24 34c1 .49 1.25.78 1.25 1.37a.79.79.0 01-.85.88 1.41 1.41.0 01-1.33-.91l-1.19 1.28a2.71 2.71.0 002.65 1.66c1.51.0 2.32-1.19 2.32-3A2.94 2.94.0 0024.1 32.11z" fill="#fff"/><path d="M29.42 27.89c-1.51.0-2.61 1.37-2.61 4.42V33.9c0 3 1.1 4.42 2.61 4.42S32 36.92 32 33.9V32.31c0-3.05-1.08-4.42-2.58-4.42zm1 6c0 1.66-.35 2.39-1 2.39s-1-.73-1-2.39V32.31c0-1.66.35-2.39 1-2.39s1 .73 1 2.39z" fill="#fff"/><path d="M38 31.23c0-2.12-1-3.19-2.51-3.19H33V38.17h1.59V34.34h.82l1.11 3.83h1.75L37 33.91a3.08 3.08.0 001-2.68zm-2.7 1.08h-.71V30.07h.71c.64.0 1.1.19 1.1 1.16S36 32.31 35.34 32.31z" fill="#fff"/></svg></span><span class="text-uppercase font-weight-bold">OpenBikeSensor</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/><span class=active>Start</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Dokumentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/faq/><span>FAQ</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/verein/><span>Der Verein</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Deutsch</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Das ist eine für den Ausdruck optimierte Ansicht des gesamten Kapitels inkl. Unterseiten.
<a href=# onclick="return print(),!1">Druckvorgang starten</a>.</p><p><a href=/docs/firmware/>Zur Standardansicht zurückkehren</a>.</p></div><h1 class=title>Firmware</h1><ul><li>1: <a href=#pg-fca233693d8fdf737151c457f238c493>Flashen unter Linux</a></li><li>2: <a href=#pg-2439bc46c09f9912d4a37acf5de16efb>Flashen unter Windows</a></li><ul></ul><li>3: <a href=#pg-4b23d64e7c919d6c2e6e5e990a32cede>Flashen unter macOS</a></li></ul><div class=content><p>Firmware ist die Bezeichung für Software, die auf eingebetteten Systemen wie
dem ESP32 und anderen Mikroprozessoren läuft, und dort für die Funktionalität
der Hardware verantwortlich ist. Beim OpenBikeSensor ist dies also ein Programm
das wir selbst schreiben, mit dem der ESP32 bespielt wird, und das sich um die
Aufzeichnung der zu messenden Daten, die Anzeige im Display und die ganze
Konfigurationsoberfläche kümmert.</p><p>Die Firmware wird, wie alle Softwareteile, unter Open Source Lizenz auf GitHub
entwickelt: <a href=https://github.com/openbikesensor/OpenBikeSensorFirmware>https://github.com/openbikesensor/OpenBikeSensorFirmware</a>. Für die
Weiterentwicklung sind alle eingeladen, die sich für
Mikroprozessorprogrammierung interessieren.</p><p>Featurewünsche oder Fehlerberichte sammeln wir im <a href=https://github.com/openbikesensor/OpenBikeSensorFirmware/issues>Issue
Tracker</a> auf
GitHub.</p><h2 id=installation--flashen>Installation / Flashen</h2><p>Ein etwas komplizierter Schritt beim Aufbau des Sensors, den alle Bastler:innen
mindestens einmal mit ihrem neuen Gerät durchlaufen müssen, ist die initiale
Installation der Firmware auf dem ESP32. Dies wird auch als &ldquo;Flashen&rdquo; (engl.
<em>to flash</em>) bezeichnet.</p><p>Hierfür muss das Mikroprozessor-Board aus dem OpenBikeSensor ausgebaut und mit
einem USB-Kabel an einen Computer angeschlossen werden. Die Anleitungen für das
Übertragen der Firmware auf den Mikroprozessor unterscheidet sich stark nach
Betriebssystem des Computers, daher haben wir sie hier getrennt aufgeführt:</p><ul><li><a href=/docs/firmware/flash-linux/>Linux</a></li><li><a href=/docs/firmware/flash-windows/>Windows</a></li><li><a href=/docs/firmware/flash-macos/>macOS</a></li></ul><h2 id=versionsupgrade>Versionsupgrade</h2><p>Eine neue Version der Firmware kann direkt über die Bedienoberfläche
eingespielt werden. Hierfür gibt es entsprechende Menüpunkte im Hauptmenü. Ein
Auseinanderbauen des Geräts und der Anschluss an einen Computer sind dafür
nicht mehr nötig.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-fca233693d8fdf737151c457f238c493>1 - Flashen unter Linux</h1><h2 id=vorbereitung>Vorbereitung</h2><p>Lade das <a href=https://github.com/openbikesensor/OpenBikeSensorFirmware/releases>neueste Release-Archiv</a>
der OBS-Firmware von GitHub herunter.</p><p>Du benötigst die ZIP-Datei mit dem Namen <code>obs-v9.9.9.9999-initial-flash.zip</code> (<code>v9.9.9.9999</code> steht für die Versionsnummer).
Entpacke die Dateien in einem temporären Verzeichnis, sie heißen <code>0x??????.bin</code>. Die Zahlen sind die Basisadresse, an die
die Daten geflasht werden sollen.</p><h2 id=installation>Installation</h2><p>Installiere das Programm <code>esptool</code>, falls es noch nicht installiert ist. Es ist in den
meisten Linux-Distributionen verfügbar.</p><h3 id=debian-gnulinux-ubuntu>Debian GNU/Linux, Ubuntu</h3><p>und davon abgeleitete Distributionen, wie z. B. Linux Mint</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt install esptool
</code></pre></div><h3 id=fedora>Fedora</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo dnf install esptool
</code></pre></div><h2 id=alternative-installation>Alternative Installation</h2><p>Sollte Deine Linux Distribution dieses Paket nicht enthalten, dann kannst du versuchen es so zu installieren.</p><ul><li>lege ein Verzeichnis an, in dem das Tool installiert werden soll, und wechsle in dieses Verzeichnis</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>mkdir ~/esptool
<span style=color:#204a87>cd</span> ~/esptool
</code></pre></div><ul><li>für die Installation gib nacheinander folgende Befehle ein</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>python3 -m venv venv
. venv/bin/activate
pip install esptool
</code></pre></div><ul><li>nun lass dir die Version anzeigen</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>esptool.py version
</code></pre></div><ul><li>war die Installation erfolgreich, dann wird die Versionsnummer angezeigt (diese kann bei dir abweichend sein)</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>esptool.py v3.2
3.2
</code></pre></div><h2 id=gerätenamen-herausfinden>Gerätenamen herausfinden</h2><p>Stelle sicher, dass du den Gerätenamen für das USB-Gerät kennst. Sehr wahrscheinlich wird es <code>/dev/ttyUSB0</code> sein &ndash;
dieser Name wird auch im weiteren Beispiel verwendet.</p><p>Herausfinden kannst du den Namen mit folgenden Schritten:</p><ul><li>den OpenBikeSensor noch nicht mit dem Computer verbinden</li><li>in einem Terminal eingeben und ausführen</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ls -1d /dev/ttyUSB*
</code></pre></div><ul><li>wenn kein solches USB-Gerät an deinem Computer angeschlossen ist, wird ein Fehler angezeigt, anderenfalls eine Liste
der vorhandenen <code>/dev/ttyUSB</code> Geräte, z. B.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>/dev/ttyUSB0
/dev/ttyUSB1
</code></pre></div><ul><li>nun den OpenBikeSensor anschließen, einige Sekunden warten und nochmal im Terminal eingeben und ausführen</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ls -1d /dev/ttyUSB*
</code></pre></div><ul><li>nun sollte in der Liste der Geräte ein Eintrag dazugekommen sein, dies ist der Gerätename für deinen OpenBikeSensor</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>/dev/ttyUSB0
/dev/ttyUSB1
/dev/ttyUSB2  &lt;-- neu hinzugekommen
</code></pre></div><h2 id=flashen>Flashen</h2><p>Führe <strong>im selben Verzeichnis</strong>, in das du die ZIP-Datei entpackt hast, folgenden Befehl aus:</p><p><strong>Achtung:</strong> Ersetze <code>/dev/ttyUSB0</code> mit dem Gerätenamen den du im vorherigen Schritt ermittelt hast.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>esptool <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --chip esp32 <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --port /dev/ttyUSB0 <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --baud <span style=color:#0000cf;font-weight:700>921600</span> <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --before default_reset <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --after hard_reset <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    write_flash -z <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_mode dio <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_freq 40m <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_size detect <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x1000 0x01000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x8000 0x08000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0xe000 0x0e000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x10000 0x10000.bin
</code></pre></div><p><strong>Achtung:</strong> Hast du die alternative Installationsanleitung verwendet, dann musst du eventuell zuvor noch folgende Schritte ausführen.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#204a87>cd</span> ~/esptool
. venv/bin/activate
</code></pre></div><p>Und das Kommando <code>esptool</code> durch <code>esptool.py</code> ersetzen.</p><p><strong>Achtung:</strong> Erscheint eine Fehlermldung (sinngemäß) <code>bash: esptool: command not found</code>, dann ersetze im obigen Kommando <code>esptool</code> durch <code>esptool.py</code>. Hilft das nicht, dann versuche einen der folgenden Aufrufe.</p><ul><li><code>python3 esptool.py ...</code></li><li><code>python esptool.py ...</code></li><li><code>python3 /absoluter/pfad/zu/esptool.py ...</code> (Pfad beim Paketmanager recherchieren)</li><li><code>python /absoluter/pfad/zu/esptool.py ...</code> (s. o.)</li><li><code>python3 -m esptool ...</code></li><li><code>python -m esptool ...</code></li></ul><p>Führt auch keiner dieser Aufrufe zum Erfolg, melde dich im Forum (<a href=https://forum.openbikesensor.org>https://forum.openbikesensor.org</a>), wir finden gemeinsam eine Lösung.</p><h2 id=versionsupdates>Versionsupdates</h2><p>Versionsupdates können in weiterer Folge über die Weboberfläche des OpenBikeSensors erfolgen und nicht mehr durch den oben angeführten, doch recht komplizierten Vorgang.</p><p>Jetzt ist dein OpenBikeSensor einsatzbereit und du kannst mit der <a href=https://openbikesensor.org/docs/user-guide/configuration/minimal/>Basiskonfiguration</a> fortfahren!</p><h2 id=bei-problemen>Bei Problemen</h2><p>Wenn du keine Schreibberechtigung hast, kannst du den Dateimodus des Geräts ändern (oder das Kommando als root ausführen):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo chmod 0x666 /dev/ttyUSB0
</code></pre></div><p>Wenn du öfter mit dem ESP32 arbeitest, installiere dir entsprechende udev-Regeln.</p><p>Sollte alles fehlschlagen, und du noch Fragen haben oder weitere Infos suchen, findest
du <a href=https://test.openbikesensor.org/community/>in der Community</a> immer Hilfe.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2439bc46c09f9912d4a37acf5de16efb>2 - Flashen unter Windows</h1><p>So flasht du eine neue Firmware auf deinen ESP32, wenn du einen
Windows-Computer benutzt.</p><h2 id=firmware-herunterladen>Firmware herunterladen</h2><p>Lade das <a href=https://github.com/openbikesensor/OpenBikeSensorFirmware/releases>neueste
Release-Archiv</a>
der OBS-Firmware von GitHub herunter.</p><p>Du benötigst die größere ZIP-Datei mit dem Namen
<code>obs-v9.9.9.9999-initial-flash.zip</code>. Entpacke die Dateien in einen temporären
Ordner, sie heißen <code>0x??????.bin</code>. Die Zahlen sind die Basisadresse, an die die
Daten geflasht werden sollen. Mach dir keine Gedanken darüber, was das bedeutet,
dies wird in den nächsten Schritten Sinn ergeben.</p><h2 id=flash-tools-herunterladen>Flash Tools herunterladen</h2><p>Lade die <a href=https://www.espressif.com/en/support/download/other-tools>&ldquo;Flash Download Tools&rdquo; für
ESP32</a> (und einige
verwandte Chips) vom Hersteller ESPRESSIF herunter und extrahieren das Archiv
in einen speziellen temporären Ordner.</p><p>Es erfolgt keine Installation, vielmehr wird das Tool direkt aus dem Ordner
heraus gestartet.</p><h2 id=treiber-installieren>Treiber installieren</h2><p>Du musst wahrscheinlich einen sogenannten USB-to-UART (seriellen) Treiber
installieren, damit Windows mit dem Chip auf dem ESP-Entwicklungsboard
kommunizieren kann. Da es sich um einen generischen Treiber handelt, hast du
diesen möglicherweise bereits schon bei anderen Projekten installiert? Im
Zweifelsfall lade und installiere sicherheitshalber den Treiber von der
Herstellerseite, Silicon Labs. Eventuell kann es sich auch lohnen, auf die
neueste Version zu aktualisieren. Der Treiber ist im Paket für die CP210x-Chips
enthalten. Du findest ihn <a href=https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers>auf dieser
Seite</a>, er
heißt &ldquo;CP210x Universal Windows Driver&rdquo;. Folge den dort gegebenen Anweisungen.</p><p>Sollte der Link nicht mehr funktionieren, verwende Google, um eine
aktualisierte Version zu erhalten, aber achte wie gewohnt darauf, dass du auf
einer vertrauenswürdigen Seite landest.</p><h2 id=flash-tool-bedienung>Flash Tool Bedienung</h2><p>Trenne alle USB-Geräte vom Computer, die du gerade nicht benötigst. Der
Anschluss könnte ansonsten bei der Auswahl des richtigen (zu flashenden)
Gerätes verwechselt werden.</p><p>Verbinde nun das ESP32 Board über USB-Kabel. Du kannst das Entwicklungsboard
hierfür aus dem OpenBikeSensor ausbauen, oder nur die Stromzufuhr der Batterie
mit dem Schalter trennen (normal ausschalten) und das USB-Kabel durch die
Öffnung hinter der GPS-Antenne führen und in das eingebauten Board einstecken.</p><p>Windows sollte bestätigen, dass ein neues Gerät erkannt wurde. Manche Kabel
funktionieren nicht, wenn dein Gerät nicht erkannt wird, probiere es mit einem
anderen.</p><p>Starte die ausführbare Datei <code>flash_download_tool_3.X.X.exe</code> im Ordner des
Flash Download Tools. Das dauert ein wenig &ndash; nur Geduld. Es öffnet zuerst ein
Konsolenfenster und schließlich eine einfache Benutzeroberfläche.</p><p>Wähle <em>Entwicklermodus - ESP32 DownloadTool</em> in der Benutzeroberfläche (der
<em>Factory-Modus</em> kann verwendet werden, wenn mehrere ESPs gleichzeitig geflasht
werden sollen &ndash; in diesem Fall kann man auch mehrere ESPs gleichzeitig
verbinden).</p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:310px><a href=/docs/firmware/flash-windows/esp32-download-tool.png target=_blank><img class="card-img-top img-fluid" src=/docs/firmware/flash-windows/esp32-download-tool_hu8c7b391d137a39822a3fbb6fa6b5931a_134314_300x0_resize_catmullrom_2.png width=300 height=474></a><div class="card-body px-0 pt-2 pb-0"><p class=card-text>Eine korrekte Konfiguration der ESP32 Flash Download Tools (klicken zum Vergrößern)</p></div></div><p>Jetzt musst du dem Tool mitteilen, <em>was</em> geflasht werden soll. Oben im Dialog
gibt es mehrere Zeilen, beginnend mit Kontrollkästchen, einem Textbereich,
einen Knopf mit drei Punkten, einem <code>@</code>-Zeichen und einem weiteren Textbereich.</p><p>Wähle für jede der 4 Dateien, die wir flashen müssen, die drei Punkte aus, die
eine Dateiauswahl ermöglichen, in der du jeweils eine der 4 <code>*.bin</code>-Dateien der
Firmware auswählst. Die Reihenfolge ist nicht wichtig, aber du musst die
Adresse der Datei in das rechteste Textfeld eingeben. Die Adresse steht jeweils
im Dateinamen, z. B. <code>0x01000</code>. Die Kästchen wechselt auf grünen Hintergrund,
was eine positive Plausibilitätsprüfung des Flash-Tools bedeutet.</p><p>Aktivieren nun die Kontrollkästchen, die sich vor den soeben vorgenommenen Eingaben befinden.
Alle anderen Werte bleiben auf ihren Standardeinstellungen:</p><ul><li>SPI SPEED: 40MHz</li><li>SPI MODE: DIO (ändert sich gleich automatisch)</li><li>FLASH SIZE: 32Mbit</li><li>SpiAutoSet: nicht ausgewählt</li><li>DoNotChgBin: ausgewählt</li></ul><p>Unten siehst du eine Dropdown-Box mit der Beschriftung <em>COM</em>. Hier musst du den
richtigen COM-Port für den Flash-Vorgang auswählen. Wenn du dir nicht sicher
bist, belasse den Standardwert und versuchen einen anderen Wert, wenn der
Vorgang fehlschlägt. Stelle sicher, dass keine anderen Geräte angeschlossen
sind!</p><p>Drücke nun <em>Start</em>. Danach solltest du etwa Folgendes sehen: „Flashing in Progress“</p><p>Wenn alles richtig läuft, erhältst du einen Fortschrittsbalken mit einer
abschließenden Erfolgsmeldung. Ziehe danach das USB-Kabel ab. Das ESP32 kann
dann in das OpenBikeSensor-Gehäuse eingebaut werden (falls noch nicht
geschehen).</p><p>Versionsupdates können in weiterer Folge über die Weboberfläche des
OpenBikeSensors erfolgen und nicht mehr durch den oben angeführten, doch recht
komplizierten Vorgang.</p><p>Jetzt ist dein OpenBikeSensor einsatzbereit und du kannst mit der
<a href=https://test.openbikesensor.org/docs/user-guide/configuration/minimal/>Basiskonfiguration</a>
fortfahren!</p><h2 id=bei-problemen>Bei Problemen</h2><p>Wenn du eine rote Fehlermeldung erhältst, überprüfe ob die USB-Verbindung
korrekt ist und der richtige COM-Port ausgewählt wurde. Wenn alles fehlschlägt,
und du hast Fragen oder weitere Infos suchst, findest du <a href=https://test.openbikesensor.org/community/>in der Community</a> immer Hilfe.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4b23d64e7c919d6c2e6e5e990a32cede>3 - Flashen unter macOS</h1><h2 id=vorbereitung>Vorbereitung</h2><p>Lade das <a href=https://github.com/openbikesensor/OpenBikeSensorFirmware/releases>neueste
Release-Archiv</a>
der OBS-Firmware von GitHub herunter.</p><p>Du benötigst die größere ZIP-Datei mit dem Namen
<code>obs-v9.9.9.9999-initial-flash.zip</code>. Entpacke die Dateien in einen temporären
Ordner, sie heißen <code>0x??????.bin</code>. Die Zahlen sind die Basisadresse, an die die
Daten geflasht werden sollen.</p><p>Installiere das Programm <code>esptool</code>, falls es noch nicht installiert ist. Über
Homebrew kannst du es so bekommen:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install esptool
</code></pre></div><p>Stelle sicher, dass du den Gerätenamen für das USB-Gerät kennst. Dies ist
normalerweise <code>/dev/tty.usbserial-0001</code> &ndash; dies wird auch im Beispiel unten
angenommen. Auf macOS kannst du deine aktuellen USB-Geräte mit <code>ioreg -p IOUSB -w0 -l</code> auflisten. Suche im Zweifelsfall nach einem USB-zu-UART-USB-Gerät.</p><h2 id=flashen>Flashen</h2><p>Führe <strong>im selben Verzeichnis</strong>, in das du die ZIP-Datei entpackt hast, folgenden Befehl aus:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>esptool.py <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --chip esp32 <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --port /dev/ttyUSB0 <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --baud <span style=color:#0000cf;font-weight:700>921600</span> <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --before default_reset <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --after hard_reset <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    write_flash -z <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_mode dio <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_freq 40m <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    --flash_size detect <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x1000 0x01000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x8000 0x08000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0xe000 0x0e000.bin <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>    0x10000 0x10000.bin
</code></pre></div><h2 id=bei-problemen>Bei Problemen</h2><p>Wenn du keine Schreibberechtigung hast, kannst du den Dateimodus des Geräts
ändern (oder das Kommando als root ausführen):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo chmod 0x777 /dev/ttyUSB0
</code></pre></div><p>Sollte alles fehlschlagen, und du noch Fragen haben oder weitere Infos suchen, findest
du <a href=https://test.openbikesensor.org/community/>in der Community</a> immer Hilfe.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 OpenBikeSensor contributors – Alle Rechte vorbehalten</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js integrity=sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s crossorigin=anonymous></script><script src=/js/main.min.d2d6d7e244373050e91333e49368c70a60457fc8603864a7be5de5b72f617b86.js integrity="sha256-0tbX4kQ3MFDpEzPkk2jHCmBFf8hgOGSnvl3lty9he4Y=" crossorigin=anonymous></script></body></html>